#!/usr/bin/env python

import socket

tcpSocket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
#reusable address if loosing the connection
tcpSocket.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
tcpSocket.bind(('0.0.0.0', 8000))
tcpSocket.listen(2)

print "Waiting for client..."

(client, (ip, port)) = tcpSocket.accept()

print "User with IP %s is connected" %str(ip)
data = "dummy"

while len(data):
	data = client.recv(20148)
	print "%s says : %s" %(str(ip), str(data))
	client.send("Your message has sent and received")

print "Closing Connetion"
client.close()
print "Closing the socket"
tcpSocket.close()
